import{S as C,i as J,s as L,e as m,w as j,k as M,t as S,c as h,a as k,x as I,m as O,h as P,d as f,b as p,g as w,y as B,J as _,j as x,q as g,o as b,B as N,W as A,O as W,l as G,P as F,K as H,M as z,n as R,p as T,Q as X}from"../chunks/vendor-63f95e45.js";import{p as Y}from"../chunks/stores-55200c5e.js";import{S as Z,c as K,L as ee}from"../chunks/loadingScreen-7546c393.js";function te(l){let t,s,e,r;return{c(){t=m("div"),s=m("img"),this.h()},l(o){t=h(o,"DIV",{class:!0});var a=k(t);s=h(a,"IMG",{src:!0,alt:!0,class:!0}),a.forEach(f),this.h()},h(){A(s.src,e=l[0].foto)||p(s,"src",e),p(s,"alt",r=l[0].name),p(s,"class","svelte-vdrvur"),p(t,"class","img-container svelte-vdrvur")},m(o,a){w(o,t,a),_(t,s)},p(o,a){a&1&&!A(s.src,e=o[0].foto)&&p(s,"src",e),a&1&&r!==(r=o[0].name)&&p(s,"alt",r)},d(o){o&&f(t)}}}function re(l){let t,s,e,r,o=l[0].name+"",a,c,n,d=l[0].prezzo+"",E,v,q,$;return s=new Z({props:{width:"100%",$$slots:{default:[te]},$$scope:{ctx:l}}}),{c(){t=m("div"),j(s.$$.fragment),e=M(),r=m("p"),a=S(o),c=M(),n=m("p"),E=S(d),v=m("span"),q=S("\u20AC/kg"),this.h()},l(i){t=h(i,"DIV",{class:!0});var u=k(t);I(s.$$.fragment,u),e=O(u),r=h(u,"P",{class:!0});var y=k(r);a=P(y,o),y.forEach(f),c=O(u),n=h(u,"P",{class:!0});var D=k(n);E=P(D,d),v=h(D,"SPAN",{class:!0});var V=k(v);q=P(V,"\u20AC/kg"),V.forEach(f),D.forEach(f),u.forEach(f),this.h()},h(){p(r,"class","name svelte-vdrvur"),p(v,"class","unit svelte-vdrvur"),p(n,"class","price svelte-vdrvur"),p(t,"class","product")},m(i,u){w(i,t,u),B(s,t,null),_(t,e),_(t,r),_(r,a),_(t,c),_(t,n),_(n,E),_(n,v),_(v,q),$=!0},p(i,[u]){const y={};u&3&&(y.$$scope={dirty:u,ctx:i}),s.$set(y),(!$||u&1)&&o!==(o=i[0].name+"")&&x(a,o),(!$||u&1)&&d!==(d=i[0].prezzo+"")&&x(E,d)},i(i){$||(g(s.$$.fragment,i),$=!0)},o(i){b(s.$$.fragment,i),$=!1},d(i){i&&f(t),N(s)}}}function se(l,t,s){let{product:e}=t;return l.$$set=r=>{"product"in r&&s(0,e=r.product)},[e]}class ae extends C{constructor(t){super();J(this,t,se,re,L,{product:0})}}function Q(l,t,s){const e=l.slice();return e[4]=t[s],e}function ne(l){let t=JSON.parse(l[7].message).message+"",s;return{c(){s=S(t)},l(e){s=P(e,t)},m(e,r){w(e,s,r)},p:z,i:z,o:z,d(e){e&&f(s)}}}function le(l){let t,s,e=l[3],r=[];for(let a=0;a<e.length;a+=1)r[a]=U(Q(l,e,a));const o=a=>b(r[a],1,1,()=>{r[a]=null});return{c(){t=m("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){t=h(a,"DIV",{class:!0});var c=k(t);for(let n=0;n<r.length;n+=1)r[n].l(c);c.forEach(f),this.h()},h(){p(t,"class","products svelte-u2x3ob")},m(a,c){w(a,t,c);for(let n=0;n<r.length;n+=1)r[n].m(t,null);s=!0},p(a,c){if(c&1){e=a[3];let n;for(n=0;n<e.length;n+=1){const d=Q(a,e,n);r[n]?(r[n].p(d,c),g(r[n],1)):(r[n]=U(d),r[n].c(),g(r[n],1),r[n].m(t,null))}for(R(),n=e.length;n<r.length;n+=1)o(n);T()}},i(a){if(!s){for(let c=0;c<e.length;c+=1)g(r[c]);s=!0}},o(a){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)b(r[c]);s=!1},d(a){a&&f(t),X(r,a)}}}function U(l){let t,s;return t=new ae({props:{product:l[4]}}),{c(){j(t.$$.fragment)},l(e){I(t.$$.fragment,e)},m(e,r){B(t,e,r),s=!0},p:z,i(e){s||(g(t.$$.fragment,e),s=!0)},o(e){b(t.$$.fragment,e),s=!1},d(e){N(t,e)}}}function oe(l){let t,s;return t=new ee({}),{c(){j(t.$$.fragment)},l(e){I(t.$$.fragment,e)},m(e,r){B(t,e,r),s=!0},p:z,i(e){s||(g(t.$$.fragment,e),s=!0)},o(e){b(t.$$.fragment,e),s=!1},d(e){N(t,e)}}}function ce(l){let t,s,e={ctx:l,current:null,token:null,hasCatch:!0,pending:oe,then:le,catch:ne,value:3,error:7,blocks:[,,,]};return W(l[0],e),{c(){t=G(),e.block.c()},l(r){t=G(),e.block.l(r)},m(r,o){w(r,t,o),e.block.m(r,e.anchor=o),e.mount=()=>t.parentNode,e.anchor=t,s=!0},p(r,[o]){l=r,F(e,l,o)},i(r){s||(g(e.block),s=!0)},o(r){for(let o=0;o<3;o+=1){const a=e.blocks[o];b(a)}s=!1},d(r){r&&f(t),e.block.d(r),e.token=null,e=null}}}function ie(l){return l.items.map(s=>({name:s.fields.nome,prezzo:s.fields.prezzo,foto:s.fields.foto.fields.file.url}))}function ue(l,t,s){let e;H(l,Y,a=>s(1,e=a));async function r(){const a=e.params.category,n=await(await K.getEntries({content_type:"categoria","fields.slug":a})).items[0].sys.id,d=await K.getEntries({content_type:"prodotto","fields.categoria.sys.id":n});return ie(d)}return[r()]}class _e extends C{constructor(t){super();J(this,t,ue,ce,L,{})}}export{_e as default};
