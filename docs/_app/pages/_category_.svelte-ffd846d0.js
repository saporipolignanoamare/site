import{S as C,i as J,s as L,e as m,w as j,k as M,t as S,c as h,a as k,x as I,m as O,h as P,d as f,b as d,g as w,y as B,J as _,j as x,q as g,o as b,B as N,W as A,O as W,l as G,P as F,K as H,M as z,n as R,p as T,Q as X}from"../chunks/vendor-4b7424a8.js";import{p as Y}from"../chunks/stores-325eda5a.js";import{S as Z,c as K,L as ee}from"../chunks/loadingScreen-5ded58b7.js";function te(l){let t,a,e,r;return{c(){t=m("div"),a=m("img"),this.h()},l(o){t=h(o,"DIV",{class:!0});var s=k(t);a=h(s,"IMG",{src:!0,alt:!0,class:!0}),s.forEach(f),this.h()},h(){A(a.src,e=l[0].foto)||d(a,"src",e),d(a,"alt",r=l[0].name),d(a,"class","svelte-vdrvur"),d(t,"class","img-container svelte-vdrvur")},m(o,s){w(o,t,s),_(t,a)},p(o,s){s&1&&!A(a.src,e=o[0].foto)&&d(a,"src",e),s&1&&r!==(r=o[0].name)&&d(a,"alt",r)},d(o){o&&f(t)}}}function re(l){let t,a,e,r,o=l[0].name+"",s,c,n,p=l[0].prezzo+"",E,v,q,$;return a=new Z({props:{width:"100%",$$slots:{default:[te]},$$scope:{ctx:l}}}),{c(){t=m("div"),j(a.$$.fragment),e=M(),r=m("p"),s=S(o),c=M(),n=m("p"),E=S(p),v=m("span"),q=S("\u20AC/kg"),this.h()},l(i){t=h(i,"DIV",{class:!0});var u=k(t);I(a.$$.fragment,u),e=O(u),r=h(u,"P",{class:!0});var y=k(r);s=P(y,o),y.forEach(f),c=O(u),n=h(u,"P",{class:!0});var D=k(n);E=P(D,p),v=h(D,"SPAN",{class:!0});var V=k(v);q=P(V,"\u20AC/kg"),V.forEach(f),D.forEach(f),u.forEach(f),this.h()},h(){d(r,"class","name svelte-vdrvur"),d(v,"class","unit svelte-vdrvur"),d(n,"class","price svelte-vdrvur"),d(t,"class","product")},m(i,u){w(i,t,u),B(a,t,null),_(t,e),_(t,r),_(r,s),_(t,c),_(t,n),_(n,E),_(n,v),_(v,q),$=!0},p(i,[u]){const y={};u&3&&(y.$$scope={dirty:u,ctx:i}),a.$set(y),(!$||u&1)&&o!==(o=i[0].name+"")&&x(s,o),(!$||u&1)&&p!==(p=i[0].prezzo+"")&&x(E,p)},i(i){$||(g(a.$$.fragment,i),$=!0)},o(i){b(a.$$.fragment,i),$=!1},d(i){i&&f(t),N(a)}}}function ae(l,t,a){let{product:e}=t;return l.$$set=r=>{"product"in r&&a(0,e=r.product)},[e]}class se extends C{constructor(t){super();J(this,t,ae,re,L,{product:0})}}function Q(l,t,a){const e=l.slice();return e[4]=t[a],e}function ne(l){let t=JSON.parse(l[7].message).message+"",a;return{c(){a=S(t)},l(e){a=P(e,t)},m(e,r){w(e,a,r)},p:z,i:z,o:z,d(e){e&&f(a)}}}function le(l){let t,a,e=l[3],r=[];for(let s=0;s<e.length;s+=1)r[s]=U(Q(l,e,s));const o=s=>b(r[s],1,1,()=>{r[s]=null});return{c(){t=m("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){t=h(s,"DIV",{class:!0});var c=k(t);for(let n=0;n<r.length;n+=1)r[n].l(c);c.forEach(f),this.h()},h(){d(t,"class","products svelte-u2x3ob")},m(s,c){w(s,t,c);for(let n=0;n<r.length;n+=1)r[n].m(t,null);a=!0},p(s,c){if(c&1){e=s[3];let n;for(n=0;n<e.length;n+=1){const p=Q(s,e,n);r[n]?(r[n].p(p,c),g(r[n],1)):(r[n]=U(p),r[n].c(),g(r[n],1),r[n].m(t,null))}for(R(),n=e.length;n<r.length;n+=1)o(n);T()}},i(s){if(!a){for(let c=0;c<e.length;c+=1)g(r[c]);a=!0}},o(s){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)b(r[c]);a=!1},d(s){s&&f(t),X(r,s)}}}function U(l){let t,a;return t=new se({props:{product:l[4]}}),{c(){j(t.$$.fragment)},l(e){I(t.$$.fragment,e)},m(e,r){B(t,e,r),a=!0},p:z,i(e){a||(g(t.$$.fragment,e),a=!0)},o(e){b(t.$$.fragment,e),a=!1},d(e){N(t,e)}}}function oe(l){let t,a;return t=new ee({}),{c(){j(t.$$.fragment)},l(e){I(t.$$.fragment,e)},m(e,r){B(t,e,r),a=!0},p:z,i(e){a||(g(t.$$.fragment,e),a=!0)},o(e){b(t.$$.fragment,e),a=!1},d(e){N(t,e)}}}function ce(l){let t,a,e={ctx:l,current:null,token:null,hasCatch:!0,pending:oe,then:le,catch:ne,value:3,error:7,blocks:[,,,]};return W(l[0],e),{c(){t=G(),e.block.c()},l(r){t=G(),e.block.l(r)},m(r,o){w(r,t,o),e.block.m(r,e.anchor=o),e.mount=()=>t.parentNode,e.anchor=t,a=!0},p(r,[o]){l=r,F(e,l,o)},i(r){a||(g(e.block),a=!0)},o(r){for(let o=0;o<3;o+=1){const s=e.blocks[o];b(s)}a=!1},d(r){r&&f(t),e.block.d(r),e.token=null,e=null}}}function ie(l){return l.items.map(a=>({name:a.fields.nome,prezzo:a.fields.prezzo,foto:a.fields.foto.fields.file.url}))}function ue(l,t,a){let e;H(l,Y,s=>a(1,e=s));async function r(){const s=e.params.category,n=await(await K.getEntries({content_type:"categoria","fields.slug":s})).items[0].sys.id,p=await K.getEntries({content_type:"prodotto","fields.categoria.sys.id":n});return ie(p)}return[r()]}class _e extends C{constructor(t){super();J(this,t,ue,ce,L,{})}}export{_e as default};
